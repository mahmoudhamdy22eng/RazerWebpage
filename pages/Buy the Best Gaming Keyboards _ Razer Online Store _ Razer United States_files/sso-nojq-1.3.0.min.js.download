if(typeof Promise=="undefined"||Promise.toString().indexOf("[native code]")==-1){(function(root){var setTimeoutFunc=setTimeout;function noop(){}function bind(fn,thisArg){return function(){fn.apply(thisArg,arguments)}}function Promise(fn){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");if(typeof fn!=="function")throw new TypeError("not a function");this._state=0;this._handled=false;this._value=undefined;this._deferreds=[];doResolve(fn,this)}function handle(self,deferred){while(self._state===3){self=self._value}if(self._state===0){self._deferreds.push(deferred);return}self._handled=true;Promise._immediateFn(function(){var cb=self._state===1?deferred.onFulfilled:deferred.onRejected;if(cb===null){(self._state===1?resolve:reject)(deferred.promise,self._value);return}var ret;try{ret=cb(self._value)}catch(e){reject(deferred.promise,e);return}resolve(deferred.promise,ret)})}function resolve(self,newValue){try{if(newValue===self)throw new TypeError("A promise cannot be resolved with itself.");if(newValue&&(typeof newValue==="object"||typeof newValue==="function")){var then=newValue.then;if(newValue instanceof Promise){self._state=3;self._value=newValue;finale(self);return}else if(typeof then==="function"){doResolve(bind(then,newValue),self);return}}self._state=1;self._value=newValue;finale(self)}catch(e){reject(self,e)}}function reject(self,newValue){self._state=2;self._value=newValue;finale(self)}function finale(self){if(self._state===2&&self._deferreds.length===0){Promise._immediateFn(function(){if(!self._handled){Promise._unhandledRejectionFn(self._value)}})}for(var i=0,len=self._deferreds.length;i<len;i++){handle(self,self._deferreds[i])}self._deferreds=null}function Handler(onFulfilled,onRejected,promise){this.onFulfilled=typeof onFulfilled==="function"?onFulfilled:null;this.onRejected=typeof onRejected==="function"?onRejected:null;this.promise=promise}function doResolve(fn,self){var done=false;try{fn(function(value){if(done)return;done=true;resolve(self,value)},function(reason){if(done)return;done=true;reject(self,reason)})}catch(ex){if(done)return;done=true;reject(self,ex)}}Promise.prototype["catch"]=function(onRejected){return this.then(null,onRejected)};Promise.prototype.then=function(onFulfilled,onRejected){var prom=new this.constructor(noop);handle(this,new Handler(onFulfilled,onRejected,prom));return prom};Promise.all=function(arr){var args=Array.prototype.slice.call(arr);return new Promise(function(resolve,reject){if(args.length===0)return resolve([]);var remaining=args.length;function res(i,val){try{if(val&&(typeof val==="object"||typeof val==="function")){var then=val.then;if(typeof then==="function"){then.call(val,function(val){res(i,val)},reject);return}}args[i]=val;if(--remaining===0){resolve(args)}}catch(ex){reject(ex)}}for(var i=0;i<args.length;i++){res(i,args[i])}})};Promise.resolve=function(value){if(value&&typeof value==="object"&&value.constructor===Promise){return value}return new Promise(function(resolve){resolve(value)})};Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})};Promise.race=function(values){return new Promise(function(resolve,reject){for(var i=0,len=values.length;i<len;i++){values[i].then(resolve,reject)}})};Promise._immediateFn=typeof setImmediate==="function"&&function(fn){setImmediate(fn)}||function(fn){setTimeoutFunc(fn,0)};Promise._unhandledRejectionFn=function _unhandledRejectionFn(err){if(typeof console!=="undefined"&&console){console.warn("Possible Unhandled Promise Rejection:",err)}};Promise._setImmediateFn=function _setImmediateFn(fn){Promise._immediateFn=fn};Promise._setUnhandledRejectionFn=function _setUnhandledRejectionFn(fn){Promise._unhandledRejectionFn=fn};if(typeof module!=="undefined"&&module.exports){module.exports=Promise}else if(!root.Promise){root.Promise=Promise}})(this)}if(typeof fetch=="undefined"){(function(self){"use strict";if(!self.__disableNativeFetch&&self.fetch){return}function normalizeName(name){if(typeof name!=="string"){name=String(name)}if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name)){throw new TypeError("Invalid character in header field name")}return name.toLowerCase()}function normalizeValue(value){if(typeof value!=="string"){value=String(value)}return value}function Headers(headers){this.map={};if(headers instanceof Headers){headers.forEach(function(value,name){this.append(name,value)},this)}else if(headers){Object.getOwnPropertyNames(headers).forEach(function(name){this.append(name,headers[name])},this)}}Headers.prototype.append=function(name,value){name=normalizeName(name);value=normalizeValue(value);var list=this.map[name];if(!list){list=[];this.map[name]=list}list.push(value)};Headers.prototype["delete"]=function(name){delete this.map[normalizeName(name)]};Headers.prototype.get=function(name){var values=this.map[normalizeName(name)];return values?values[0]:null};Headers.prototype.getAll=function(name){return this.map[normalizeName(name)]||[]};Headers.prototype.has=function(name){return this.map.hasOwnProperty(normalizeName(name))};Headers.prototype.set=function(name,value){this.map[normalizeName(name)]=[normalizeValue(value)]};Headers.prototype.forEach=function(callback,thisArg){Object.getOwnPropertyNames(this.map).forEach(function(name){this.map[name].forEach(function(value){callback.call(thisArg,value,name,this)},this)},this)};function consumed(body){if(body.bodyUsed){return Promise.reject(new TypeError("Already read"))}body.bodyUsed=true}function fileReaderReady(reader){return new Promise(function(resolve,reject){reader.onload=function(){resolve(reader.result)};reader.onerror=function(){reject(reader.error)}})}function readBlobAsArrayBuffer(blob){var reader=new FileReader;reader.readAsArrayBuffer(blob);return fileReaderReady(reader)}function readBlobAsText(blob,options){var reader=new FileReader;var contentType=options.headers.map["content-type"]?options.headers.map["content-type"].toString():"";var regex=/charset\=[0-9a-zA-Z\-\_]*;?/;var _charset=blob.type.match(regex)||contentType.match(regex);var args=[blob];if(_charset){args.push(_charset[0].replace(/^charset\=/,"").replace(/;$/,""))}reader.readAsText.apply(reader,args);return fileReaderReady(reader)}var support={blob:"FileReader"in self&&"Blob"in self&&function(){try{new Blob;return true}catch(e){return false}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};function Body(){this.bodyUsed=false;this._initBody=function(body,options){this._bodyInit=body;if(typeof body==="string"){this._bodyText=body}else if(support.blob&&Blob.prototype.isPrototypeOf(body)){this._bodyBlob=body;this._options=options}else if(support.formData&&FormData.prototype.isPrototypeOf(body)){this._bodyFormData=body}else if(!body){this._bodyText=""}else if(support.arrayBuffer&&ArrayBuffer.prototype.isPrototypeOf(body)){}else{throw new Error("unsupported BodyInit type")}};if(support.blob){this.blob=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return Promise.resolve(this._bodyBlob)}else if(this._bodyFormData){throw new Error("could not read FormData body as blob")}else{return Promise.resolve(new Blob([this._bodyText]))}};this.arrayBuffer=function(){return this.blob().then(readBlobAsArrayBuffer)};this.text=function(){var rejected=consumed(this);if(rejected){return rejected}if(this._bodyBlob){return readBlobAsText(this._bodyBlob,this._options)}else if(this._bodyFormData){throw new Error("could not read FormData body as text")}else{return Promise.resolve(this._bodyText)}}}else{this.text=function(){var rejected=consumed(this);return rejected?rejected:Promise.resolve(this._bodyText)}}if(support.formData){this.formData=function(){return this.text().then(decode)}}this.json=function(){return this.text().then(JSON.parse)};return this}var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function normalizeMethod(method){var upcased=method.toUpperCase();return methods.indexOf(upcased)>-1?upcased:method}function Request(input,options){options=options||{};var body=options.body;if(Request.prototype.isPrototypeOf(input)){if(input.bodyUsed){throw new TypeError("Already read")}this.url=input.url;this.credentials=input.credentials;if(!options.headers){this.headers=new Headers(input.headers)}this.method=input.method;this.mode=input.mode;if(!body){body=input._bodyInit;input.bodyUsed=true}}else{this.url=input}this.credentials=options.credentials||this.credentials||"omit";if(options.headers||!this.headers){this.headers=new Headers(options.headers)}this.method=normalizeMethod(options.method||this.method||"GET");this.mode=options.mode||this.mode||null;this.referrer=null;if((this.method==="GET"||this.method==="HEAD")&&body){throw new TypeError("Body not allowed for GET or HEAD requests")}this._initBody(body,options)}Request.prototype.clone=function(){return new Request(this)};function decode(body){var form=new FormData;body.trim().split("&").forEach(function(bytes){if(bytes){var split=bytes.split("=");var name=split.shift().replace(/\+/g," ");var value=split.join("=").replace(/\+/g," ");form.append(decodeURIComponent(name),decodeURIComponent(value))}});return form}function headers(xhr){var head=new Headers;var pairs=xhr.getAllResponseHeaders().trim().split("\n");pairs.forEach(function(header){var split=header.trim().split(":");var key=split.shift().trim();var value=split.join(":").trim();head.append(key,value)});return head}Body.call(Request.prototype);function Response(bodyInit,options){if(!options){options={}}this._initBody(bodyInit,options);this.type="default";this.status=options.status;this.ok=this.status>=200&&this.status<300;this.statusText=options.statusText;this.headers=options.headers instanceof Headers?options.headers:new Headers(options.headers);this.url=options.url||""}Body.call(Response.prototype);Response.prototype.clone=function(){return new Response(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})};Response.error=function(){var response=new Response(null,{status:0,statusText:""});response.type="error";return response};var redirectStatuses=[301,302,303,307,308];Response.redirect=function(url,status){if(redirectStatuses.indexOf(status)===-1){throw new RangeError("Invalid status code")}return new Response(null,{status:status,headers:{location:url}})};self.Headers=Headers;self.Request=Request;self.Response=Response;self.fetch=function(input,init){return new Promise(function(resolve,reject){var request;if(Request.prototype.isPrototypeOf(input)&&!init){request=input}else{request=new Request(input,init)}var xhr=new XMLHttpRequest;function responseURL(){if("responseURL"in xhr){return xhr.responseURL}if(/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())){return xhr.getResponseHeader("X-Request-URL")}return}var __onLoadHandled=false;function onload(){if(xhr.readyState!==4){return}var status=xhr.status===1223?204:xhr.status;if(status<100||status>599){if(__onLoadHandled){return}else{__onLoadHandled=true}reject(new TypeError("Network request failed"));return}var options={status:status,statusText:xhr.statusText,headers:headers(xhr),url:responseURL()};var body="response"in xhr?xhr.response:xhr.responseText;if(__onLoadHandled){return}else{__onLoadHandled=true}resolve(new Response(body,options))}xhr.onreadystatechange=onload;xhr.onload=onload;xhr.onerror=function(){if(__onLoadHandled){return}else{__onLoadHandled=true}reject(new TypeError("Network request failed"))};xhr.open(request.method,request.url,true);try{if(request.credentials==="include"){if("withCredentials"in xhr){xhr.withCredentials=true}else{console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning")}}}catch(e){console&&console.warn&&console.warn("set withCredentials error:"+e)}if("responseType"in xhr&&support.blob){xhr.responseType="blob"}request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)});xhr.send(typeof request._bodyInit==="undefined"?null:request._bodyInit)})};self.fetch.polyfill=true;if(typeof module!=="undefined"&&module.exports){module.exports=self.fetch}})(typeof self!=="undefined"?self:this)}var DOMAIN="https://oauth2.razer.com";var rz=rz||{_client_id:"",_client_key:"",_grant_type:"",_scope:"sso",_redirect_uri:document.location.href,_session_id:"",init:function(params){if(undefined!=params.client_id)this._client_id=params.client_id;if(undefined!=params.client_key)this._client_key=params.client_key;if(undefined!=params.grant_type)this._grant_type=params.grant_type;if(undefined!=params.scope)this._scope=params.scope;if(undefined!=params.redirect_uri)this._redirect_uri=params.redirect_uri;if(undefined!=params.session_id)this._session_id=params.session_id},set:function(key,value){switch(key){case"client_id":this._client_id=value;break;case"grant_type":this._grant_type=value;break;case"scope":this._scope=value;break;case"redirect_uri":this._redirect_uri=value;break;case"session_id":this._session_id=value;break}},_verifyService:function(params){var pdata={client_id:this._client_id,client_key:this._client_key,scope:this._scope};if(typeof params==="object"&&params.update_userinfo&&params.update_userinfo==1){pdata.update_userinfo=1}if(typeof params==="object"&&params.check_userconsent&&params.check_userconsent==1){pdata.check_userconsent=1}var formData=[];for(var k in pdata){var ek=encodeURIComponent(k);var ev=encodeURIComponent(pdata[k]);formData.push(ek+"="+ev)}formData=formData.join("&");var url=DOMAIN+"/services/sso";fetch(url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:formData,credentials:"include",cache:"no-store"}).then(function(response){if(response.status===401){return response.json()}if(!response.ok){throw response}return response.json()}).then(function(response){window.setInfo(response)}).catch(function(e){var resp=rz._handleErrors(e);window.setInfo(resp)})},_getSessionService:function(){var url=DOMAIN+"/services/session?q="+Date.now()+"&client_id="+this._client_id;fetch(url,{method:"GET",credentials:"include",cache:"no-store"}).then(function(response){if(response.status===401){return response.json()}if(!response.ok){throw response}return response.json()}).then(function(response){window.cbSession(response)}).catch(function(e){var resp=rz._handleErrors(e);window.cbSession(resp)})},_putSessionService:function(update_status){var pdata={client_id:this._client_id,update_status:update_status};var formData=[];for(var k in pdata){var ek=encodeURIComponent(k);var ev=encodeURIComponent(pdata[k]);formData.push(ek+"="+ev)}formData=formData.join("&");var url=DOMAIN+"/services/session";fetch(url,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:formData,cache:"no-store"}).then(function(response){if(response.status===401){return response.json()}if(!response.ok){throw response}return response.json()}).then(function(response){window.cbSession(response)}).catch(function(e){var resp=rz._handleErrors(e);window.cbSession(resp)})},_loginService:function(params){var pdata={grant_type:this._grant_type,client_id:this._client_id,scope:this._scope,redirect_uri:this._redirect_uri};if(this._session_id!="")pdata.session_id=this._session_id;if(params.username)pdata.username=params.username;if(params.password)pdata.password=params.password;if(params.uuid)pdata.uuid=params.uuid;if(params.token)pdata.token=params.token;if(params.nonce)pdata.nonce=params.nonce;if(params.session_id)pdata.session_id=params.session_id;if(params.read_token)pdata.read_token=params.read_token;if(params.consent_token)pdata.consent_token=params.consent_token;var formData=[];for(var k in pdata){var ek=encodeURIComponent(k);var ev=encodeURIComponent(pdata[k]);formData.push(ek+"="+ev)}formData=formData.join("&");var url=DOMAIN+"/services/login_sso";fetch(url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},credentials:"include",body:formData,cache:"no-store"}).then(function(response){if(response.status===401){return response.json()}if(!response.ok){throw response}return response.json()}).then(function(response){window.cbLogin(response)}).catch(function(e){var resp=rz._handleErrors(e);window.cbLogin(resp)})},_logoutService:function(){var url=DOMAIN+"/services/logout?q="+Date.now();fetch(url,{method:"GET",cache:"no-store",credentials:"include"}).then(function(response){if(response.status===401){return response.json()}if(!response.ok){throw response}return response.json()}).then(function(response){window.cbLogout(response)}).catch(function(e){var resp=rz._handleErrors(e);window.cbLogout(resp)})},_handleErrors:function(e){var response;if(e.status==504){response=JSON.parse('{"error":"request_timeout","error_description":"No response from server"}')}else{response=JSON.parse('{"error":"server_error","error_description":"An unknown error has occurred"}')}return response},_rzlog:function(xhr,status,response,service){if(window.RZSSODEBUG!=undefined&&window.RZSSODEBUG==1){console.info(service);console.info(response)}},verify:function(params){this._verifyService(params)},session:function(){this._getSessionService()},tap:function(){this._putSessionService(0)},update_status:function(){this._putSessionService(1)},ext_login:function(provider){window.location.replace(DOMAIN+"/thirdparty?provider="+provider+"&client_id="+this._client_id+"&jwt=1&redirect_uri="+this._redirect_uri)},login:function(params){this._loginService(params)},logout:function(){this._logoutService()}};try{window.RzSdk()}catch(e){console.warn("error: "+e.message)}